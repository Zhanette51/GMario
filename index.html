<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–° –î–Ω—ë–º –†–æ–∂–¥–µ–Ω–∏—è!</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Comic+Neue:wght@700&display=swap" rel="stylesheet">
    <style>
        /* –°–∫—Ä—ã–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∏ */
        #preload { display: none; }
    </style>
</head>
<body>
    <audio id="backgroundMusic" loop>
    <source src="music/backgroundMusic.mp3" type="audio/mpeg">
    –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç.
</audio>

<!-- –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ–º -->
<script>
    // –ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –º—É–∑—ã–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', function() {
        const music = document.getElementById('backgroundMusic');
        if (music) {
            music.volume = 0.3;
            
            // –ü—ã—Ç–∞–µ–º—Å—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
            const playPromise = music.play();
            
            if (playPromise !== undefined) {
                playPromise.catch(error => {
                    // –ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ
                    console.log("–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ. –ú—É–∑—ã–∫–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –ø—Ä–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏.");
                    
                    // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –º—É–∑—ã–∫–∏
                    const musicButton = document.createElement('button');
                    musicButton.textContent = 'üéµ –í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É';
                    musicButton.className = 'pixel-button';
                    musicButton.style.margin = '10px';
                    musicButton.style.background = '#8B4513';
                    
                    musicButton.addEventListener('click', function() {
                        music.play();
                        musicButton.remove();
                    });
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
                    const container = document.querySelector('.container');
                    container.insertBefore(musicButton, container.firstChild.nextSibling);
                });
            }
        }
    });
</script>
    <div class="container">
        <h1>üéâ –° –Æ–±–∏–ª–µ–µ–º! üéâ</h1>
        <p class="subtitle">–ü–æ–º–æ–≥–∏ –ú–∞–º–µ-–ú–∞—Ä–∏–æ —Å–æ–±—Ä–∞—Ç—å –≤—Å–µ –ø–æ–¥–∞—Ä–∫–∏ –∫ –ø—Ä–∞–∑–¥–Ω–∏–∫—É!</p>
        <p class="controls-info">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: <kbd>‚Üê</kbd> <kbd>‚Üí</kbd> - –±–µ–≥, <kbd>‚Üë</kbd> - –ø—Ä—ã–∂–æ–∫, <kbd>R</kbd> - –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫</p>

        <div class="game-wrapper">
            <canvas id="gameCanvas" width="800" height="400"></canvas>
            <div id="message" class="message"></div>
            <div id="loading" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã...</div>
        </div>

        <div class="stats-panel">
            <div class="stat">
                <span class="stat-label">–ü–æ–¥–∞—Ä–∫–∏:</span>
                <span id="score">0</span>/<span id="totalGifts">5</span>
            </div>
            <div class="stat">
                <span class="stat-label">–ñ–∏–∑–Ω–∏:</span>
                <span id="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span>
            </div>
            <button id="restartButton" class="pixel-button">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞!</button>
        </div>

        <div class="footer">
            <p>–°–æ–±–µ—Ä–∏ –≤—Å–µ –ø–æ–¥–∞—Ä–∫–∏ –∏ –¥–æ–π–¥–∏ –¥–æ —Ñ–ª–∞–≥–∞!</p>
            <p class="hint">–°–æ–∑–¥–∞–Ω–æ —Å –±–µ–∑–≥—Ä–∞–Ω–∏—á–Ω–æ–π –ª—é–±–æ–≤—å—é üíñ</p>
        </div>
    </div>

    <!-- –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π -->
    <div id="preload">
        <img src="images/mama.png" id="mamaSprite">
        <img src="images/blocks.png" id="blockSprite">
        <img src="images/gift.png" id="giftSprite">
        <img src="images/flag.png" id="flagSprite">
        <img src="images/cloud.png" id="cloudSprite">
        <img src="images/bush.png" id="bushSprite">
        <img src="images/pipe.png" id="pipeSprite">
    </div>

    <script src="game.js"></script>
</body>
</html>
